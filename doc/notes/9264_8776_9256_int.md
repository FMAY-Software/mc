---

This work is licensed under the Creative Commons CC0 License

---

# Three MASL Flow Issues
### xtUML Project Implementation Note


1. Abstract
-----------

2. Document References
----------------------
[1] [9264](https://support.onefact.net/redmine/issues/9264) attribute named `current_state` is dropped  
[2] [8776](https://support.onefact.net/redmine/issues/8776) Detect and report empty role phrases.  
[3] [9256](https://support.onefact.net/redmine/issues/9256) One-to-Many with associative crashes masl process  

3. Background
-------------
`current_state` is a special attribute that most of the time is supplied
by BridgePoint automatically when a class has a state machine.

4. Requirements
---------------
4.1 `current_state`  
4.1.1 Recognize when `current_state` is part of the imported application
and keep it around.  
4.1.2 Continue to omit the architectural `current_state` attribute on export.  

4.2 empty role phrases  
4.2.1 Output a message to the user when associations are missing role
phrases.  The console is sufficient.  

4.3 1:M-assoc  
4.3.1 Stop crashing on export when referentials and role phrases have
matching names.

5. Work Required
----------------
5.1 `current_state`  
4.1.1 In the instance dumper, detect the type of `current_state` attributes
and dump accordingly.

5.2 empty role phrases  
5.2.1 In the export routines for simple and associative relationships,
detect empty roles phrases and output tracing information.  Supply the
names of the classes involved.

5.3 1:M-assoc  
5.3.1 

6. Implementation Comments
--------------------------

7. Unit Test
------------
7.1 `masl_round_trip`  
7.1.1 Run `masl_round_trip` on test `9264_current_state`.  
7.1.2 See empty diff.  
7.1.3 Run `masl_round_trip` on test `9254_1tomassoc`.  
7.1.4 See empty diff.  
7.1.5 Import the `MASL_template` project.  
7.1.6 Add the name attribute on `a_class` to the identifier.  
7.1.7 Add a new class (`c_class`).  
7.1.8 Relate new class to `a_class`.  
7.1.9 Formalize association.  
7.1.10 Export MASL Domain.  
7.1.11 See console failure message complaining about missing role phrases.  

7.2 `masl_round_trip` regression  
7.2.1 Run `regression_test`.  
7.2.2 See empty diff files.

8. Code Changes
---------------
<pre>

Fork: cortlandstarrett/mc  9264_current_state

xtuml/mc

</pre>

End
---

